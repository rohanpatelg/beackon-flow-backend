import express, { Router } from 'express';
import {
  initiateAuth,
  handleCallback,
  getAuthStatus,
  publishPost,
  disconnectLinkedIn,
} from '@/controllers/linkedinController';
import { authenticateToken } from '@/middlewares/authMiddleware';

const router: Router = express.Router();

/**
 * @route   POST /api/linkedin/auth/initiate
 * @desc    Initiate LinkedIn OAuth flow
 * @access  Public (optional auth)
 */
router.post('/auth/initiate', initiateAuth);

/**
 * @route   GET /api/linkedin/auth/callback
 * @desc    Handle LinkedIn OAuth callback
 * @access  Public
 */
router.get('/auth/callback', handleCallback);

/**
 * @route   GET /api/linkedin/auth/status
 * @desc    Get LinkedIn authentication status
 * @access  Private (requires JWT)
 */
router.get('/auth/status', authenticateToken, getAuthStatus);

/**
 * @route   DELETE /api/linkedin/auth/disconnect
 * @desc    Disconnect LinkedIn account
 * @access  Private (requires JWT)
 */
router.delete('/auth/disconnect', authenticateToken, disconnectLinkedIn);

/**
 * @route   POST /api/linkedin/publish
 * @desc    Publish a post to LinkedIn
 * @access  Private (requires JWT)
 */
router.post('/publish', authenticateToken, publishPost);

export default router;
